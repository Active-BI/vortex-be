"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[330],{8330:(ie,Y,l)=>{l.r(Y),l.d(Y,{MasterModule:()=>oe});var p=l(6895),f=l(2510),q=l(529),r=l(7155),C=l(8739),c=l(9549),S=l(4455),d=l(5412),s=l(4006),v=l(4144),R=l(4859),g=l(7392),M=l(2289),Q=l(7084),E=l(7775),L=l(4466),b=l(3238),j=l(507),B=l(2673),$=l(7957),O=l(9738),H=l(3145),U=l(266),z=l(635),y=l(6709),W=l(8991),J=l(1029),F=l(1816),t=l(4650),h=l(7185),I=l(2340);let A=(()=>{class n{constructor(e,o){this.http=e,this.toast=o,this.baseUrl=I.N.baseUrl}tenants(){return this.http.get(`${this.baseUrl}tenants`)}tenant(e){return this.http.get(`${this.baseUrl}tenants/${e}`)}createTenant(e){return this.http.post(`${this.baseUrl}tenants`,e)}updateTenant(e,o){return this.http.patch(`${this.baseUrl}tenants/${e}`,o)}removeTenant(e){return this.http.delete(`${this.baseUrl}tenants/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(q.eN),t.LFG(h._W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X=["paginator"];function K(n,i){1&n&&(t.TgZ(0,"th",22),t._uU(1," Nome "),t.qZA())}function V(n,i){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.tenant_name," ")}}function P(n,i){1&n&&(t.TgZ(0,"th",22),t._uU(1," Status "),t.qZA())}function tt(n,i){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.active?"Ativo":"Inativo"," ")}}function et(n,i){1&n&&t._UZ(0,"tr",24)}function nt(n,i){1&n&&t._UZ(0,"tr",25)}function ot(n,i){1&n&&t._UZ(0,"th",22)}function it(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"div",26)(2,"button",27),t.NdJ("click",function(){const m=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.editarUsuario(m.id))}),t._UZ(3,"mat-icon",28),t.qZA(),t.TgZ(4,"button",29),t.NdJ("click",function(){const m=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.listarUsuarios(m.id))}),t._UZ(5,"mat-icon",30),t.qZA()()()}}let at=(()=>{class n{constructor(e,o,a,m){this.router=e,this.dialog=o,this.toastr=a,this.tenantsService=m,this.myControl=new s.NI(""),this.pipe=new p.uU("en-US"),this.displayedColumns=["nome","status","opcoes"],this.usuariosL=0,this.requisicoes()}ngOnInit(){this.requisicoes()}requisicoes(){this.tenantsService.tenants().subscribe(e=>{this.usuarios=new r.by(e),this.usuariosFiltrados=new r.by(e),this.usuariosFiltrados.paginator=this.paginator,this.usuarios.paginator=this.paginator,this.usuariosL=this.usuarios?.data.length})}filtarUsuarios(e){const o=this.usuarios.data.filter(a=>a.tenant_name.toUpperCase().includes(e.toUpperCase()));this.usuariosFiltrados=new r.by(o),this.usuariosFiltrados.paginator=this.paginator}deletarUsuario(e){(0,F.Z)(localStorage.getItem("token")).userId!==e?this.dialog.open(J.z,{data:{nome:"Usu\xe1rios",data:()=>{this.dialog.closeAll(),this.tenantsService.removeTenant(e).subscribe(()=>{this.toastr.success("Desativado com Sucesso"),this.requisicoes()})}}}):this.toastr.error("N\xe3o \xe9 poss\xedvel excluir usu\xe1rio em uso")}criarUsuario(){this.router.navigate(["/master/gestao/tenants/criar"])}listarUsuarios(e){this.router.navigate(["/master/gestao/tenants/"+e+"/user/list"])}editarUsuario(e){this.router.navigate(["/master/gestao/tenants/editar/"+e])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F0),t.Y36(d.uw),t.Y36(h._W),t.Y36(A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-gestao-tenant"]],viewQuery:function(e,o){if(1&e&&t.Gf(X,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:30,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"text-3x-L","flex-auto","p-6","justify-center"],[1,"flex","items-center","justify-start"],["mat-raised-button","",1,"self-end","mt-2","rounded-sm","text-colorText","bg-[#006cbe]","text-white",3,"click"],[1,"w-full","bg-primary","h-16","rounded-t-md","mt-4","flex","items-center","justify-between"],[1,"text-3xl","text-white","mx-4"],["appearance","fill",1,"w-80","mt-4","mr-4","ml-1"],[1,"mr-4"],["type","text","placeholder","Buscar","matInput","",3,"formControl","ngModelChange"],["id","table",1,"flex","flex-col","shadow-2xl"],["mat-table","",1,"pb-6",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","opcoes",1,"flex"],[1,"flex","bg-white","justify-end"],["showFirstLastButtons","",3,"pageSize","length"],["paginator",""],["id","table",1,"flex","flex-row","p-4"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"w-full","flex","justify-end"],["matTooltip","Editar",1,"text-violet-900",3,"click"],["svgIcon","edit_note",1,"cursor-pointer","mr-5","text-blue-700"],["matTooltip","Administradores",1,"text-violet-900",3,"click"],["color","warn","svgIcon","mat_solid:people",1,"cursor-pointer","mr-5","text-blue-700"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return o.criarUsuario()}),t._uU(4,"Criar Ambientes"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5),t._uU(7,"Ambientes"),t.qZA(),t.TgZ(8,"div",2)(9,"mat-form-field",6)(10,"mat-icon",7),t._uU(11,"search"),t.qZA(),t.TgZ(12,"input",8),t.NdJ("ngModelChange",function(m){return o.filtarUsuarios(m)}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"table",10),t.ynx(15,11),t.YNc(16,K,2,0,"th",12),t.YNc(17,V,2,1,"td",13),t.BQk(),t.ynx(18,14),t.YNc(19,P,2,0,"th",12),t.YNc(20,tt,2,1,"td",13),t.BQk(),t.YNc(21,et,1,0,"tr",15),t.YNc(22,nt,1,0,"tr",16),t.ynx(23,17),t.YNc(24,ot,1,0,"th",12),t.YNc(25,it,6,0,"td",13),t.BQk(),t.qZA(),t.TgZ(26,"div",18),t._UZ(27,"mat-paginator",19,20),t.qZA()(),t._UZ(29,"div",21),t.qZA()()),2&e&&(t.xp6(12),t.Q6J("formControl",o.myControl),t.xp6(2),t.Q6J("dataSource",o.usuariosFiltrados),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(5),t.Q6J("pageSize",10)("length",o.usuariosL))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,C.NW,c.KE,s.Fj,s.JJ,v.Nt,s.oH,R.lW,g.Hw,U.gM]}),n})();var st=l(4674),rt=l(6798),w=l(613),T=l(4385);function lt(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1," Nome \xe9 Obrigat\xf3rio "),t.qZA())}function mt(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1," Precisa de no m\xednimo 3 d\xedgitos "),t.qZA())}function ut(n,i){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,lt,2,0,"div",19),t.YNc(2,mt,2,0,"div",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.form.controls.tenant_name.errors?null:e.form.controls.tenant_name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.tenant_name.errors?null:e.form.controls.tenant_name.errors.minlength)}}function ct(n,i){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.report_id)("selected",!0),t.xp6(1),t.Oqu(e.name)}}let G=(()=>{class n{constructor(e,o,a,m,u,x,N){this.fb=e,this.router=o,this.route=a,this.toastr=m,this.tenantsService=u,this.dialog=x,this.dashboardService=N,this.myControl=new s.NI(""),this.tenants=[],this.selectedTenant=this.tenants,this.visionsSelecteds=[],this.form=this.fb.group({id:[""],tenant_name:["",[s.kI.required,s.kI.minLength(3)]],active:["",[s.kI.required]],dashboard:[[],[s.kI.required]]}),this.panelOpenState=!1,this.ordersData=st.c,this.dashboardsSelecteds=[],this.listRoles=rt.x,this.id=this.route.snapshot.paramMap.get("id");let Z=!1;this.route.url.subscribe(_=>{Z=_[2].path.includes("editar")}),Z&&(this.dashboardService.getMasterDashBoardById(this.id).subscribe(_=>{this.dashboardsSelecteds=_,this.form.patchValue({dashboard:_.filter(k=>!0===k.included).map(k=>k.report_id)})}),this.tenantsService.tenant(this.id).subscribe(_=>{this.tenant=_,console.log(this.tenant),this.form.patchValue({id:this.tenant.id,tenant_name:this.tenant.tenant_name,active:this.tenant.active})}))}onKey(e){this.selectedTenant=this.search(e)}search(e){let o=e.toLowerCase();return this.tenants.filter(a=>a.nome_cliente.toLowerCase().startsWith(o))}click(){console.log(this.form.value.dashboard)}ngOnInit(){}voltar(){this.router.navigate(["master/gestao/tenants"])}redirectToEdit(e){this.router.navigate(["/master/gestao/tenants/editar/"+e])}deletarUsuario(e){(0,F.Z)(localStorage.getItem("token")).userId!==e?this.dialog.open(J.z,{data:{nome:"Usu\xe1rios",data:()=>{this.dialog.closeAll(),this.tenantsService.removeTenant(e).subscribe(()=>{this.toastr.success("Desativado com Sucesso"),this.voltar()})}}}):this.toastr.error("N\xe3o \xe9 poss\xedvel excluir usu\xe1rio em uso")}editar(){this.form.valid&&this.myControl.valid?(console.log(this.form.value),this.tenantsService.updateTenant(this.id,{...this.form.value}).subscribe(e=>{this.toastr.success("Editado com Sucesso")})):this.form.markAllAsTouched()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(f.F0),t.Y36(f.gz),t.Y36(h._W),t.Y36(A),t.Y36(d.uw),t.Y36(w.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-gestao-tenant-edit"]],decls:27,vars:3,consts:[[1,"w-full","flex","flex-col","pl-4","bg-white"],[1,"w-full","flex","mt-4"],[1,"self-start","mr-4","hover:rounded-full",3,"click"],["svgIcon","arrow_back",1,"flex","self-center","text-slate-600","hover:text-slate-400"],[1,"text-slate-700","text-2xl","mb-6"],[1,"flex","flex-col","w-100",3,"formGroup","submit"],["appearance","fill"],["formControlName","tenant_name","matInput",""],["first",""],["svgIcon","heroicons_outline:user-circle",1,""],["class","text-red-600 mb-2",4,"ngIf"],["formControlName","active"],[1,"mt-6"],["formControlName","dashboard","multiple","",3,"click"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"flex","mt-6"],["color","warn",1,"text-white","text-center","algin-middle","bg-red-500","w-20","hover:bg-red-600","h-7","mr-2","font-medium","rounded-md","text-sm","dark:bg-red-400","focus:outline-none","dark:focus:ring-red-800",3,"click"],["color","primary",1,"text-white","text-center","algin-middle","bg-blue-600","w-20","hover:bg-blue-700","h-7","mr-2","font-medium","rounded-md","text-sm","dark:bg-blue-400","focus:outline-none","dark:focus:ring-blue-500",3,"click"],[1,"text-red-600","mb-2"],[4,"ngIf"],[3,"value","selected"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.voltar()}),t._UZ(3,"mat-icon",3),t.qZA(),t.TgZ(4,"h1",4),t._uU(5," EDITAR AMBIENTE "),t.qZA()(),t.TgZ(6,"form",5),t.NdJ("submit",function(m){return m.preventDefault()}),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Nome do Ambiente"),t.qZA(),t._UZ(10,"input",7,8)(12,"mat-icon",9),t.qZA(),t.YNc(13,ut,3,2,"div",10),t.TgZ(14,"p")(15,"mat-checkbox",11),t._uU(16,"Ambiente est\xe1 ativo?"),t.qZA()(),t.TgZ(17,"mat-form-field",12)(18,"mat-label"),t._uU(19,"Relat\xf3rios"),t.qZA(),t.TgZ(20,"mat-select",13),t.NdJ("click",function(){return o.click()}),t.YNc(21,ct,2,3,"mat-option",14),t.qZA()()(),t.TgZ(22,"div",15)(23,"button",16),t.NdJ("click",function(){return o.deletarUsuario(o.id)}),t._uU(24,"REMOVER"),t.qZA(),t.TgZ(25,"button",17),t.NdJ("click",function(){return o.editar()}),t._uU(26,"SALVAR"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngIf",o.form.controls.tenant_name.touched),t.xp6(8),t.Q6J("ngForOf",o.dashboardsSelecteds))},dependencies:[p.sg,p.O5,c.KE,c.hX,s._Y,s.Fj,s.JJ,s.JL,v.Nt,s.sg,s.u,g.Hw,b.ey,y.oG,T.gD]}),n})();function dt(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1," Nome \xe9 Obrigat\xf3rio "),t.qZA())}function pt(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1," Precisa de no m\xednimo 3 d\xedgitos "),t.qZA())}function ft(n,i){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,dt,2,0,"div",17),t.YNc(2,pt,2,0,"div",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.form.controls.tenant_name.errors?null:e.form.controls.tenant_name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.tenant_name.errors?null:e.form.controls.tenant_name.errors.minlength)}}function ht(n,i){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.report_id)("selected",!0),t.xp6(1),t.Oqu(e.name)}}let gt=(()=>{class n extends G{constructor(e,o,a,m,u,x,N,Z){super(e,o,a,m,x,N,Z),this.toast=u,this.tenantsServices=x,this.value="",Z.getMasterDashBoard().subscribe(_=>{this.dashboardsSelecteds=_})}ngOnInit(){}criar(){this.form.valid?(delete this.form.value.id,this.tenantsServices.createTenant({...this.form.value}).subscribe(o=>{this.toast.success("Usu\xe1rio Criado com Sucesso"),this.voltar()})):this.form.markAllAsTouched()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(f.F0),t.Y36(f.gz),t.Y36(h._W),t.Y36(h._W),t.Y36(A),t.Y36(d.uw),t.Y36(w.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-gestao-tenant-criar"]],features:[t.qOj],decls:24,vars:3,consts:[[1,"w-full","flex","flex-col","pl-4","bg-white"],[1,"w-full","flex","mt-4"],[1,"self-start","mr-4","hover:rounded-full",3,"click"],["svgIcon","arrow_back",1,"flex","self-center","text-slate-600","hover:text-slate-400"],[1,"text-slate-700","text-2xl","mb-6"],[1,"flex","flex-col","w-100",3,"formGroup","submit"],["appearance","fill"],["formControlName","tenant_name","matInput",""],["first",""],["svgIcon","heroicons_outline:user-circle",1,""],["class","text-red-600 mb-2",4,"ngIf"],["formControlName","active"],[1,"mt-6"],["formControlName","dashboard","multiple","",3,"click"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"text-white","text-center","mt-6","algin-middle","bg-blue-600","w-20","hover:bg-blue-700","h-8","mr-2","font-medium","rounded-md","text-md","dark:bg-blue-400","focus:outline-none","dark:focus:ring-blue-500",3,"click"],[1,"text-red-600","mb-2"],[4,"ngIf"],[3,"value","selected"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.voltar()}),t._UZ(3,"mat-icon",3),t.qZA(),t.TgZ(4,"h1",4),t._uU(5," CRIAR AMBIENTE "),t.qZA()(),t.TgZ(6,"form",5),t.NdJ("submit",function(m){return m.preventDefault()}),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Nome do Ambiente"),t.qZA(),t._UZ(10,"input",7,8)(12,"mat-icon",9),t.qZA(),t.YNc(13,ft,3,2,"div",10),t.TgZ(14,"p")(15,"mat-checkbox",11),t._uU(16,"Ambiente est\xe1 ativo?"),t.qZA()(),t.TgZ(17,"mat-form-field",12)(18,"mat-label"),t._uU(19,"Relat\xf3rios"),t.qZA(),t.TgZ(20,"mat-select",13),t.NdJ("click",function(){return o.click()}),t.YNc(21,ht,2,3,"mat-option",14),t.qZA()()(),t.TgZ(22,"button",15),t.NdJ("click",function(){return o.criar()}),t._uU(23,"CRIAR"),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngIf",o.form.controls.tenant_name.touched),t.xp6(8),t.Q6J("ngForOf",o.dashboardsSelecteds))},dependencies:[p.sg,p.O5,c.KE,c.hX,s._Y,s.Fj,s.JJ,s.JL,v.Nt,s.sg,s.u,g.Hw,b.ey,y.oG,T.gD]}),n})();var _t=l(5439),D=l.n(_t);function vt(n,i){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.tenant_name," ")}}let Tt=(()=>{class n{constructor(e,o,a,m,u){this.data=e,this.dialog=o,this.tenantsService=a,this.fb=m,this.toastr=u,this.tenants=[],this.selectedTenant="",this.form=this.fb.group({tenant:["",[s.kI.required]]}),this.tenantsService.tenants().subscribe(x=>{this.tenants=x})}onSubmit(){this.form.valid?this.data.data(this.form.value.tenant):this.toastr.error("Ambiente n\xe3o selecionado")}voltar(){this.dialog.closeAll()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.WI),t.Y36(d.uw),t.Y36(A),t.Y36(s.qu),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["admin-request-confirmation-modal"]],decls:21,vars:3,consts:[[1,"flex","flex-col","w-[30vw]","h-60"],[1,"w-full","flex","justify-start","text-center","align-center"],["svgIcon","mat_outline:warning_amber",1,"text-yellow-400","mr-1"],[1,"text-xl","mb-2"],[1,""],[1,"flex","flex-col","mt-4",3,"formGroup","submit"],[1,"w-60"],["formControlName","tenant"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-end","mt-3"],[1,"flex","flex-row"],["type","button",1,"text-white","text-center","algin-middle","bg-red-500","w-20","hover:bg-red-600","h-6","mr-2","font-medium","rounded-lg","text-sm","dark:bg-red-400","focus:outline-none","dark:focus:ring-red-800",3,"click"],["type","button",1,"text-white","text-center","algin-middle","bg-blue-500","w-20","hover:bg-blue-600","h-6","font-medium","rounded-lg","text-sm","dark:bg-blue-400","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"div",3),t._uU(4,"Aten\xe7\xe3o!"),t.qZA()(),t.TgZ(5,"p",4),t._uU(6),t.qZA(),t.TgZ(7,"p",4),t._uU(8,"Deseja continuar?"),t.qZA(),t.TgZ(9,"form",5),t.NdJ("submit",function(m){return m.preventDefault()}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Selecionar Ambiente"),t.qZA(),t.TgZ(13,"mat-select",7),t.YNc(14,vt,2,2,"mat-option",8),t.qZA()()(),t.TgZ(15,"div",9)(16,"div",10)(17,"button",11),t.NdJ("click",function(){return o.onSubmit()}),t._uU(18," CONFIRMAR "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return o.voltar()}),t._uU(20," CANCELAR "),t.qZA()()()()),2&e&&(t.xp6(6),t.hij(" ",o.data.nome," precisa ser atribuido a um Ambiente. "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngForOf",o.tenants))},dependencies:[p.sg,c.KE,c.hX,s._Y,s.JJ,s.JL,s.sg,s.u,g.Hw,b.ey,T.gD],styles:[".modal-dialog[_ngcontent-%COMP%]{width:1000px}"]}),n})(),xt=(()=>{class n{constructor(e,o,a){this.data=e,this.dialog=o,this.tenantsService=a,this.tenants=[],this.tenantsService.tenants().subscribe(m=>{this.tenants=m})}onSubmit(){this.data.data()}voltar(){this.dialog.closeAll()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.WI),t.Y36(d.uw),t.Y36(A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["admin-request-block-modal"]],decls:14,vars:0,consts:[[1,"flex","flex-col","w-[30vw]","h-30"],[1,"w-full","flex","justify-start","text-center","align-center"],["svgIcon","mat_outline:warning_amber",1,"text-yellow-400","mr-1"],[1,"text-xl","mb-2"],[1,""],[1,"flex","flex-row","justify-end","mt-3"],[1,"flex","flex-row"],["type","button",1,"text-white","text-center","algin-middle","bg-red-500","w-20","hover:bg-red-600","h-6","mr-2","font-medium","rounded-lg","text-sm","dark:bg-red-400","focus:outline-none","dark:focus:ring-red-800",3,"click"],["type","button",1,"text-white","text-center","algin-middle","bg-blue-500","w-20","hover:bg-blue-600","h-6","font-medium","rounded-lg","text-sm","dark:bg-blue-400","focus:outline-none","dark:focus:ring-blue-800",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"div",3),t._uU(4,"Aten\xe7\xe3o!"),t.qZA()(),t.TgZ(5,"p",4),t._uU(6,"O Email ser\xe1 invalidado ap\xf3s essa confirma\xe7\xe3o. Deseja continuar?"),t.qZA(),t._UZ(7,"div"),t.TgZ(8,"div",5)(9,"div",6)(10,"button",7),t.NdJ("click",function(){return o.onSubmit()}),t._uU(11," CONFIRMAR "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return o.voltar()}),t._uU(13," CANCELAR "),t.qZA()()()())},dependencies:[g.Hw],styles:[".modal-dialog[_ngcontent-%COMP%]{width:1000px}"]}),n})(),Ct=(()=>{class n{constructor(e,o){this.http=e,this.toast=o,this.baseUrl=I.N.baseUrl}allAdminRequests(){return this.http.get(`${this.baseUrl}admin-request`)}blockAdminRequests(e){return this.http.delete(`${this.baseUrl}admin-request/${e}`)}allowAdminRequests(e,o){return this.http.get(`${this.baseUrl}admin-request/accept/${e}/${o}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(q.eN),t.LFG(h._W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bt=["paginator"];function At(n,i){1&n&&(t.TgZ(0,"div",11),t._uU(1," Nenhum solicita\xe7\xe3o pendente "),t.qZA())}function Zt(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Nome "),t.qZA())}function Ut(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function wt(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Nome da empresa "),t.qZA())}function qt(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.company_name," ")}}function yt(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Status "),t.qZA())}function Nt(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.accept?"Aceito":"Pendente"," ")}}function kt(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Nome da empresa "),t.qZA())}function Yt(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.created_at," ")}}function Rt(n,i){1&n&&t._UZ(0,"tr",28)}function Jt(n,i){1&n&&t._UZ(0,"tr",29)}function Ft(n,i){1&n&&t._UZ(0,"th",26)}function It(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",30)(2,"button",31),t.NdJ("click",function(){const m=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.permitirUsuario(m.id,m.name))}),t._UZ(3,"mat-icon",32),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){const m=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.deletarUsuario(m.id))}),t._UZ(5,"mat-icon",34),t.qZA()()()}}function Gt(n,i){if(1&n&&(t.TgZ(0,"div",12)(1,"table",13),t.ynx(2,14),t.YNc(3,Zt,2,0,"th",15),t.YNc(4,Ut,2,1,"td",16),t.BQk(),t.ynx(5,17),t.YNc(6,wt,2,0,"th",15),t.YNc(7,qt,2,1,"td",16),t.BQk(),t.ynx(8,18),t.YNc(9,yt,2,0,"th",15),t.YNc(10,Nt,2,1,"td",16),t.BQk(),t.ynx(11,19),t.YNc(12,kt,2,0,"th",15),t.YNc(13,Yt,2,1,"td",16),t.BQk(),t.YNc(14,Rt,1,0,"tr",20),t.YNc(15,Jt,1,0,"tr",21),t.ynx(16,22),t.YNc(17,Ft,1,0,"th",15),t.YNc(18,It,6,0,"td",16),t.BQk(),t.qZA(),t.TgZ(19,"div",23),t._UZ(20,"mat-paginator",24,25),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.usuariosFiltrados),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(5),t.Q6J("pageSize",10)("length",e.usuariosL)}}let Dt=(()=>{class n{constructor(e,o,a,m){this.router=e,this.dialog=o,this.toastr=a,this.adminRequestService=m,this.myControl=new s.NI(""),this.pipe=new p.uU("en-US"),this.displayedColumns=["nome","company_name","accept","created_at","opcoes"],this.usuariosL=0,this.requisicoes()}ngOnInit(){this.requisicoes()}requisicoes(){this.adminRequestService.allAdminRequests().subscribe(e=>{e=e.map(o=>({...o,created_at:D()(o).format("DD/MM/YYYY")})),this.usuarios=new r.by(e),console.log(this.usuarios),this.usuariosFiltrados=new r.by(e),this.usuariosFiltrados.paginator=this.paginator,this.usuarios.paginator=this.paginator,this.usuariosL=this.usuarios?.data.length})}filtarUsuarios(e){const o=this.usuarios.data.filter(a=>a.name.toUpperCase().includes(e.toUpperCase()));this.usuariosFiltrados=new r.by(o),this.usuariosFiltrados.paginator=this.paginator}permitirUsuario(e,o){this.dialog.open(Tt,{data:{nome:o,data:a=>{this.dialog.closeAll(),this.adminRequestService.allowAdminRequests(e,a).subscribe(()=>{this.toastr.success("Usu\xe1rio Admin Criado"),this.requisicoes()},({error:m})=>{console.log(m),this.toastr.error(m.message)})}}})}deletarUsuario(e){this.dialog.open(xt,{data:{nome:"Usu\xe1rios",data:()=>{this.dialog.closeAll(),this.adminRequestService.blockAdminRequests(e).subscribe(()=>{this.toastr.success("Bloqueado com Sucesso"),this.requisicoes()})}}})}criarUsuario(){this.router.navigate(["/master/gestao/solicitacoes-de-cadastro/criar"])}editarUsuario(e){this.router.navigate(["/master/gestao/solicitacoes-de-cadastro/editar"+e])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F0),t.Y36(d.uw),t.Y36(h._W),t.Y36(Ct))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-requests"]],viewQuery:function(e,o){if(1&e&&t.Gf(bt,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:13,vars:3,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"text-3x-L","flex-auto","p-6","justify-center"],[1,"w-full","bg-primary","h-16","rounded-t-md","mt-4","flex","items-center","justify-between"],[1,"text-3xl","text-white","mx-4"],[1,"flex","items-center","justify-start"],["appearance","fill",1,"w-80","mt-4","mr-4","ml-1"],[1,"mr-4"],["type","text","placeholder","Buscar","matInput","",3,"formControl","ngModelChange"],["class","w-full  h-16   mt-4 flex items-center justify-center text-2xl",4,"ngIf"],["class","flex flex-col shadow-2xl","id","table",4,"ngIf"],["id","table",1,"flex","flex-row","p-4"],[1,"w-full","h-16","mt-4","flex","items-center","justify-center","text-2xl"],["id","table",1,"flex","flex-col","shadow-2xl"],["mat-table","",1,"pb-6",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","company_name"],["matColumnDef","accept"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","opcoes",1,"flex"],[1,"flex","bg-white","justify-end"],["showFirstLastButtons","",3,"pageSize","length"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"w-full","flex","justify-end"],["matTooltip","Permitir",3,"click"],["color","primary","svgIcon","heroicons_solid:check",1,"cursor-pointer","mr-5"],["matTooltip","Bloquear",3,"click"],["color","warn","svgIcon","heroicons_solid:x",1,"cursor-pointer","mr-5"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Solicita\xe7\xf5es de Acesso"),t.qZA(),t.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-icon",6),t._uU(8,"search"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(m){return o.filtarUsuarios(m)}),t.qZA()()()(),t.YNc(10,At,2,0,"div",8),t.YNc(11,Gt,22,5,"div",9),t._UZ(12,"div",10),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("formControl",o.myControl),t.xp6(1),t.Q6J("ngIf",o.usuariosFiltrados.filteredData.length<1),t.xp6(1),t.Q6J("ngIf",o.usuariosFiltrados.filteredData.length>0))},dependencies:[p.O5,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,C.NW,c.KE,s.Fj,s.JJ,v.Nt,s.oH,g.Hw,U.gM]}),n})();function St(n,i){if(1&n&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.globalmarketCategory.value?null:e.globalmarketCategory.value.length)||0)-1," ",2===(null==e.globalmarketCategory.value?null:e.globalmarketCategory.value.length)?"outro":"outros",") ")}}function Mt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.click())}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit;t.Q6J("value",e.dashboard_id),t.xp6(1),t.Oqu(e.Dashboard.name)}}let Qt=(()=>{class n{constructor(e,o,a){this.data=e,this.dialog=o,this.dashboardService=a,this.globalmarketCategory=new s.NI(""),this.usuario=e.usuario}ngOnInit(){this.globalmarketCategory.setValue(this.usuario.dashboards.filter(e=>!0===e.included).map(e=>e.dashboard_id))}onSubmit(){this.dashboardService.postMasterDashboards({DashboardUserList:this.globalmarketCategory.value,tenant_id:this.usuario.Tenant.id},this.usuario.id).subscribe(e=>{this.data.data()})}findValue(){return this.usuario.dashboards.find(e=>e.dashboard_id===this.globalmarketCategory.value[0])?.Dashboard.name||"Selecione"}voltar(){this.dialog.closeAll()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.WI),t.Y36(d.uw),t.Y36(w.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add_access_admin"]],decls:11,vars:4,consts:[[1,"flex","flex-col","w-[30vw]","h-30"],["multiple","",3,"formControl"],["class","example-additional-selection",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["color","primary",1,"text-white","text-center","algin-middle","bg-blue-600","w-20","hover:bg-blue-700","h-7","mr-2","font-medium","rounded-md","text-sm","dark:bg-blue-400","focus:outline-none","dark:focus:ring-blue-500",3,"click"],[1,"example-additional-selection"],[3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Acessos do ambiente"),t.qZA(),t.TgZ(4,"mat-select",1)(5,"mat-select-trigger"),t._uU(6),t.YNc(7,St,2,2,"span",2),t.qZA(),t.YNc(8,Mt,2,2,"mat-option",3),t.qZA()(),t.TgZ(9,"button",4),t.NdJ("click",function(){return o.onSubmit()}),t._uU(10,"SALVAR"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("formControl",o.globalmarketCategory),t.xp6(2),t.hij(" ",o.findValue()||""," "),t.xp6(1),t.Q6J("ngIf",((null==o.globalmarketCategory.value?null:o.globalmarketCategory.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",o.usuario.dashboards))},dependencies:[p.sg,p.O5,c.KE,c.hX,s.JJ,s.oH,b.ey,T.gD,T.$L],styles:[".modal-dialog[_ngcontent-%COMP%]{width:1000px}"]}),n})();const Et=["paginator"];function Lt(n,i){1&n&&(t.TgZ(0,"th",25),t._uU(1," Nome "),t.qZA())}function jt(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Bt(n,i){1&n&&(t.TgZ(0,"th",25),t._uU(1," Perfil "),t.qZA())}function $t(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.Rls.name," ")}}function Ot(n,i){1&n&&(t.TgZ(0,"th",25),t._uU(1," Identificacao "),t.qZA())}function Ht(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.profession," ")}}function zt(n,i){1&n&&(t.TgZ(0,"th",25),t._uU(1," Tenant "),t.qZA())}function Wt(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.Tenant.tenant_name," ")}}function Xt(n,i){1&n&&(t.TgZ(0,"th",25),t._uU(1," Ultimo acesso "),t.qZA())}function Kt(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.dataUltimoAcesso," ")}}function Vt(n,i){1&n&&t._UZ(0,"tr",27)}function Pt(n,i){1&n&&t._UZ(0,"tr",28)}function te(n,i){1&n&&t._UZ(0,"th",25)}function ee(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",26)(1,"div",29)(2,"button",30),t.NdJ("click",function(){const m=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.editarUsuario(m))}),t._UZ(3,"mat-icon",31),t.qZA()()()}}const ne=[{path:"gestao/tenants",component:at},{path:"gestao/tenants/criar",component:gt},{path:"gestao/tenants/editar/:id",component:G},{path:"gestao/solicitacoes-de-cadastro",component:Dt},{path:"gestao/tenants/:id/user/list",component:(()=>{class n{constructor(e,o,a,m,u){this.route=e,this.router=o,this.dashboard=a,this.toastr=m,this.dialog=u,this.myControl=new s.NI(""),this.id="",this.usuariosL=0,this.displayedColumns=["nome","perfil","ultimoAcesso","tenant","opcoes"],this.id=this.route.snapshot.paramMap.get("id")}voltar(){this.router.navigate(["/master/gestao/tenants"])}ngOnInit(){this.requisicoes()}requisicoes(){this.dashboard.getAdminUsersByTenantId(this.id).subscribe(e=>{const o=e.map(a=>({...a,role_name:a.Rls.name,tenant_name:a.Tenant.tenant_name,dataUltimoAcesso:null!==a.last_access?D()(a.last_access).format("DD/MM/YY H:mm"):"N/"}));this.usuarios=new r.by(o),this.usuariosFiltrados=new r.by(o),this.usuariosFiltrados.paginator=this.paginator,this.usuarios.paginator=this.paginator,this.usuariosL=this.usuarios?.data.length})}filtarUsuarios(e){const o=this.usuarios.data.filter(a=>a.name.toUpperCase().includes(e.toUpperCase()));this.usuariosFiltrados=new r.by(o),this.usuariosFiltrados.paginator=this.paginator}editarUsuario(e){this.dialog.open(Qt,{data:{usuario:e,data:()=>{this.dialog.closeAll(),this.requisicoes()}}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.gz),t.Y36(f.F0),t.Y36(w.s),t.Y36(h._W),t.Y36(d.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tenant-user-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(Et,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:37,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"text-3x-L","flex-auto","p-6","justify-center"],[1,"self-start","my-2","mr-8","hover:rounded-full",3,"click"],["svgIcon","arrow_back",1,"flex","self-center","text-slate-600","hover:text-slate-400"],[1,"w-full","bg-primary","h-16","rounded-t-md","mt-4","flex","items-center","justify-between"],[1,"text-3xl","text-white","mx-4"],[1,"flex","items-center","justify-start"],["appearance","fill",1,"w-80","mt-4","mr-4","ml-1"],[1,"mr-4"],["type","text","placeholder","Buscar","matInput","",3,"formControl","ngModelChange"],["id","table",1,"flex","flex-col","shadow-2xl"],["mat-table","",1,"pb-6",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","perfil"],["matColumnDef","identificacao"],["matColumnDef","tenant"],["matColumnDef","ultimoAcesso"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","opcoes",1,"flex"],[1,"flex","bg-white","justify-end"],["showFirstLastButtons","",3,"pageSize","length"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"w-full","flex","justify-end"],["matTooltip","Editar",1,"text-violet-900",3,"click"],["svgIcon","edit_note",1,"cursor-pointer","mr-5","text-blue-700"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.voltar()}),t._UZ(3,"mat-icon",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6,"Administradores"),t.qZA(),t.TgZ(7,"div",6)(8,"mat-form-field",7)(9,"mat-icon",8),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",9),t.NdJ("ngModelChange",function(m){return o.filtarUsuarios(m)}),t.qZA()()()(),t.TgZ(12,"div",10)(13,"table",11),t.ynx(14,12),t.YNc(15,Lt,2,0,"th",13),t.YNc(16,jt,2,1,"td",14),t.BQk(),t.ynx(17,15),t.YNc(18,Bt,2,0,"th",13),t.YNc(19,$t,2,1,"td",14),t.BQk(),t.ynx(20,16),t.YNc(21,Ot,2,0,"th",13),t.YNc(22,Ht,2,1,"td",14),t.BQk(),t.ynx(23,17),t.YNc(24,zt,2,0,"th",13),t.YNc(25,Wt,2,1,"td",14),t.BQk(),t.ynx(26,18),t.YNc(27,Xt,2,0,"th",13),t.YNc(28,Kt,2,1,"td",14),t.BQk(),t.YNc(29,Vt,1,0,"tr",19),t.YNc(30,Pt,1,0,"tr",20),t.ynx(31,21),t.YNc(32,te,1,0,"th",13),t.YNc(33,ee,4,0,"td",14),t.BQk(),t.qZA(),t.TgZ(34,"div",22),t._UZ(35,"mat-paginator",23,24),t.qZA()()()()),2&e&&(t.xp6(11),t.Q6J("formControl",o.myControl),t.xp6(2),t.Q6J("dataSource",o.usuariosFiltrados),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(5),t.Q6J("pageSize",10)("length",o.usuariosL))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,C.NW,c.KE,s.Fj,s.JJ,v.Nt,s.oH,g.Hw,U.gM]}),n})()}];let oe=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:b.Ad,useValue:"pt-BR"},{provide:C.ye,useValue:(0,j.o)()},W.z],imports:[p.ez,M.xu,f.Bz.forChild(ne),q.JF,r.p0,C.TU,S.S1,c.lN,d.Is,s.u5,v.c,s.UX,R.ot,g.Ps,O.r,z.z,Q.To,E.fC,L.m,B.g,H.$,$.Bb,U.AV,y.p9,T.LD]}),n})()}}]);